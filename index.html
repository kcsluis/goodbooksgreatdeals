<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<link href="https://fonts.googleapis.com/css?family=Karla:400,700" rel="stylesheet">
	<title>Mark Zuckerberg's Reading List | Good Books, Great Deals</title>
	<style type="text/css">
		* {
			font-family: 'Karla', sans-serif;
		}
		body {
			padding: 0px;
			margin: 0px;
			background-color: #fafafa;
		}
		.gbgd_page_left {
			display: inline-block;
			position: fixed;
			width: 180px;
			height: 100%;
			background-color: #eee;
			padding-left: 20px;
			font-size: 12px;
		}
		.gbgd_page_right {
			display: inline-block;
			width: calc(100% - 390px);
			margin-left: 200px;
			padding-left: 100px;
		}


		.gbgd_emaillink {
			color: #fff;
			font-size: 16px;
			background-color: rgba(0,0,0,0.66);
			font-weight: 700;
			padding: 10px;
			width: calc(100% - 420px);
			text-align: center;
			position: fixed;
			bottom: 0px;
			z-index: 1000;
			margin: 0 auto;
		}
		.gbgd_emaillink:hover {
			cursor: pointer;
			background-color: #44f;
		}


		.gbgd_nav_c {
			margin-bottom: 20px;
		}
		.gbgd_nav_header {
			margin-bottom: 7px;
			font-weight: 700;
		}
		.gbgd_nav_list {
			margin-bottom: 2px;
		}
		.gbgd_nav_list:hover {
			text-decoration: underline;
			cursor: pointer;
			color: #44f;
		}


		.gbgd_top_title {
			font-size: 12px;
			color: #bbc;
			margin-bottom: 35px;
		}
		.gbgd_title_c {
			margin-top: 40px;
			margin-bottom: 60px;
		}
		.list_block {
			margin-bottom: 120px;
			display: block;
		}
		.list_left, .list_right {
			display: inline-block;
			vertical-align: top;
		}
		.list_left {
			width: 200px;
			text-align: center;
			margin-right: 20px;
			text-decoration: none;
		}
		.list_left:hover {
			opacity: 0.9;
		}
		.list_right {
			width: calc(100% - 280px);
		}

		.gbgd_title {
			margin-top: 40px;
			margin-bottom: 40px;
			font-weight: 700;
		}
		.gbgd_list_title {
			font-size: 36px;
			font-weight: 700;
			margin-bottom: 10px;
		}
		.gbgd_list_description {
			color: #667;
			margin-bottom: 20px;
			font-size: 14px;
			width: 75%;
			line-height: 1.5;
		}
		.gbgd_list_updatedlast {
			color: #bbc;
			font-size: 12px;
		}

		a.gbgd_buyit {
			display: none;
			font-size: 28px;
			font-weight: 700;
			color: #fff;
			text-decoration: none;
			background-color: #44f;
			width: 150px;
			padding: 10px 24px;
			border-radius: 100px;
			position: relative;
			top: 10px;
			box-shadow: 0px 4px 10px 0px rgba(16,16,32,0.25)
		}
		a.gbgd_buyit:hover {
			background-color: #88f;
		}
		.gbgd_money {
			font-weight: 700;
			font-size: 28px;
			background-color: #44f;
			color: #fff;
			padding: 7px;
			width: 100px;
			margin: 0 auto;
			position: relative;
			top: -30px;
			border: 4px solid #fff;
		}
		.gbgd_money_sm {
			font-size: 14px;
		}
		.gbgd_image {
			width: 150px;
			margin: 0 auto;
			box-shadow: 0px 6px 24px 4px rgba(0,0,0,0.2);
		}
		
		.gbgd_booktitle {
			font-weight: 700;
			font-size: 48px;
			letter-spacing: -1.5px;
			line-height: 1;
			margin-bottom: 20px;
			text-decoration: underline;
			color: #000;
		}
		.gbgd_booktitle:hover {
			color: #44f;
		}
		.gbgd_bookauthor {
			font-weight: 700;
			font-size: 24px;
			margin-top: 10px;
			margin-bottom: 16px;
		}
		.gbgd_vis_c {
			margin-bottom: 20px;
		}
		.gbgd_vis {
			display: inline-block;
			text-align: left;
			margin-right: 12px;
		}
		.vis_dot {
			width: 10px;
			height: 10px;
			border-radius: 10px;
			display: inline-block;
			margin-left: 4px;
		}
		.gbgd_ratings_short {
			color: #BBC;
		}
		.gbgd_book_desc {
			font-size: 14px;
			line-height: 1.5;
			color: #667;
			overflow: hidden;
			display: -webkit-box;
			-webkit-line-clamp: 5;
			-webkit-box-orient: vertical;  
		}
/*		.gbgd_book_desc::after {
			content: "Read more";
			color: #44f;
		}*/

		.list_block:first-child {
			/*border: 5px solid black;*/
			background-color: #fff;
			padding: 60px 40px 40px 40px;
			position: relative;
			width: 100%;
			left: -45px;
			box-shadow: 0px 30px 60px 10px rgba(0,0,0,0.15);
			margin-bottom: 220px;
			border-radius: 2px;
		}
		.pick_highlight {
			margin-bottom: 20px;
			font-size: 24px;
			font-weight: 700;
		}
		.list_block:nth-child(2)::before {
			content: "Other Great Books";
			position: absolute;
			margin-top: -100px;
			font-size: 24px;
			font-weight: 700;
		}

		.gbgd_tag_c {
			margin-bottom: 22px;
		}
		.gbgd_tag {
			font-weight: 700;
			padding: 6px 16px;
			border: 2px solid #bbc;
			margin-top: 8px;
			border-radius: 100px;
			display: inline-block;
		}
		.gbgd_tag.caution {
			color: #ff7500;
			border: 2px solid #ff7500;
		}
		.gbgd_tag.deal {
			color: #44f;
			border: 2px solid #44f;
		}

	</style>
</head>
<body>

<div class="gbgd_page_c">

<div class="gbgd_page_left">

	<div class="gbgd_title">Good Books, Great Deals</div>
	<div id="gbgd_nav">
		<div class="gbgd_nav_c" v-for="nav_bucket in list_buckets">
			<div class="gbgd_nav_header">{{ nav_bucket.list_bucket }}</div>
			<div onclick="alertUser()" class="gbgd_nav_list" v-for="list in nav_bucket.lists">
				{{ list }}
			</div>
		</div>
	</div>


</div>

<div class="gbgd_page_right">

	<div class="gbgd_emaillink" onclick="alertUser()">Get our weekly newsletter</div>

	<div class="gbgd_title_c">
		<div class="gbgd_top_title">Recommendations</div>
		<div class="gbgd_list_title">Mark Zuckerberg's Book Club</div>
		<div class="gbgd_list_description">In 2015, Mark Zuckerberg hosted an online book club through his personal Facebook account. Zuckerberg made a book recommendation every two weeks to his millions of Facebook followers. The below list includes all 23 titles, ranked by a combination of price, rating, and number of readers.</div>
		<div class="gbgd_list_updatedlast">23 books, prices updated September 21, 2018</div>
	</div>

	<div class="pick_highlight">Our Favorite Deal</div>
	<div id="list_c" v-cloak>
		<div class="list_block" v-for="book in books">
			<a class='list_left' v-bind:href="book.url" target="_blank">
<!-- 				<a class="gbgd_buyit">Get it</a> -->
				<img class="gbgd_image" v-bind:src="book.img">			
				<div class="gbgd_money">
					<div class="gbgd_money_sm">Get it for</div>
					<div>{{ book.price_format }}</div>
				</div>
				<!-- <div class="gbgd_binding">{{ book.binding }}</div> -->
				
			</a>
			<div class='list_right'>
				<a class="gbgd_booktitle" v-bind:href="book.url" target="_blank">{{ book.title_y }}</a>
				<div class="gbgd_bookauthor">{{ book.author }}</div>
<!-- 				<div class="gbgd_vis_c">
					<div class="gbgd_vis">Score {{ book.k_score_format }}<span class="vis_dot" v-bind:style=indexFmt(book.k_score_format)></div>
					<div class="gbgd_vis">Price {{ book.price_index_format }}<span class="vis_dot" v-bind:style=indexFmt(book.price_index_format)></div>
					<div class="gbgd_vis">Rating {{ book.rating_index_format }}<span class="vis_dot" v-bind:style=indexFmt(book.rating_index_format)></div>
					<div class="gbgd_vis">Readers {{ book.rating_count_index_format }}<span class="vis_dot" v-bind:style=indexFmt(book.rating_count_index_format)></div>
				</div> -->
				<div class="gbgd_ratings_short">{{ book.rating_format }}/5.0 stars, {{ book.ratings_format }} readers</div>
				<div class="gbgd_tag_c">
					<div class="gbgd_tag" v-if="book.rating >= 4.4">Highly-rated</div>
					<div class="gbgd_tag caution" v-if="book.rating <= 3.5">Poorly-rated</div>
					<div class="gbgd_tag" v-if="book.rating_count > 25000">Popular with readers</div>
					<div class="gbgd_tag caution" v-if="book.rating_count < 1000">Unpopular</div>
					<div class="gbgd_tag deal" v-if="book.price < 1000">Under $10</div>
					<div class="gbgd_tag deal" v-if="book.percent_off > 35">{{ book.percent_off }}% off</div>
					<div class="gbgd_tag" v-if="book.page_count > 500">Long read: {{ book.page_count }} pages</div>
					<div class="gbgd_tag" v-if="book.page_count < 200">Short read: {{ book.page_count }} pages</div>
				</div>
				<p class="gbgd_book_desc">{{ book.description }}</p>
				<!-- <div class="gbgd_bookauthor">{{ book.author }}</div> -->
			</div>
		</div>
	</div>

</div>

</div>

</body>

<script src="https://cdn.jsdelivr.net/npm/vue"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js" charset="utf-8"></script>
<script>

function alertUser() {
	alert("Thanks for clicking around! Unfortunately, this link isn't ready yet. Check back later, won't you?");
};

d3.csv("zuckdata.csv", function(d) {

	d.sort(function(x, y){
	   return +y.new_score - +x.new_score;
	   // return +x.price - +y.price;
	})

	console.log(d);

	var mFormat = d3.format("$,.2f");
	d.forEach(function(d){
		d.price_format = mFormat(d.price/100);
	});
	var rFormat = d3.format(".1f");
	d.forEach(function(d){
		d.rating_format = rFormat(d.rating);
	});
	var cFormat = d3.format(",.2r");
	d.forEach(function(d){
		d.ratings_format = cFormat(d.rating_count);
	});
	var vFormat = d3.format(".0f");
	d.forEach(function(d){
		d.k_score_format = vFormat(d.k_score);
		d.price_index_format = vFormat(d.price_index);
		d.rating_index_format = vFormat(d.rating_index);
		d.rating_count_index_format = vFormat(d.rating_count_index);
	});

	var indexColor = d3.scale.threshold()
		.domain([10,20,30,40,50,60,70,80,90])
		.range(["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"]);

	var app = new Vue({
		el: '#list_c',
		data: {
			books: d
		},
		methods: {
			indexFmt: function(d) {
				var bkc = indexColor(d);
				var tc = '#000';
				if (d >= 80 || d <= 20) {
					tc = '#FFF';
				}
				return 'background-color: ' + bkc + '; color: ' + tc + ';';
			}
		}
	});

	var app2 = new Vue({
		el: '#gbgd_nav',
		data: {
			list_buckets: [
				{ 
					list_bucket: 'Recommendations',
					lists: [
						'Mark Zuckerberg',
						'Bill Gates',
						'Warren Buffet',
						'Elon Musk',
						'Oprah Winfrey',
						'David Bowie',
						'Neil de Grasse Tyson',
						'Patti Smith',
						'Hillary Clinton',
						'Barack Obama',
						'Martin Luther King, Jr.'
					]
				},
				{ 
					list_bucket: 'Award-winners',
					lists: [
						'Pulitzer Fiction',
						'Pulitzer Nonfiction',
						'Book Critics',
						'Nobel',
						'Hugo',
						'Nebula',
						'Newberry',
						'Caldecott',
						'NYT Bestsellers'
					]
				},
				{ 
					list_bucket: 'Subjects',
					lists: [
						'Feminism',
						'Cities',
						'Design',
						'Startups',
						'Architecture',
						'Sports',
						'New York',
						'Los Angeles'
					]
				}
			]
		}
	});

});
	
</script>

</html>